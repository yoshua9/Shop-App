<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/products"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle de Producto</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="product-detail-content">
  @if (isLoading()) {
  <div class="loading-row">
    <ion-spinner name="crescent"></ion-spinner>
    <ion-text color="medium">Cargando producto...</ion-text>
  </div>
  }

  @if (error(); as errorMsg) {
  <div class="error-state">
    <div class="error-icon-box">
      <ion-icon name="alert-circle-outline"></ion-icon>
    </div>
    <h2 class="error-title">¡Ups! Algo salió mal</h2>
    <p class="error-message">{{ errorMsg }}</p>
    <ion-button class="retry-btn" expand="block" (click)="goBack()">
      Volver al listado
    </ion-button>
  </div>
  }

  @if (product(); as prod) {
  <div class="product-detail-wrapper">
    <div class="product-image-placeholder">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L3 7V17L12 22L21 17V7L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M12 22V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M21 7L12 12L3 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M7.5 4.5L16.5 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>
    </div>

    <div class="product-header">
      <h1 class="product-title">{{ prod.name }}</h1>
      @if (prod.descriptionShort) {
      <p class="product-subtitle" [innerHTML]="prod.descriptionShort"></p>
      }
    </div>

    <div class="price-badge-row">
      <span class="product-price">{{ prod.price | currency: 'EUR' : 'symbol' : '1.2-2' }}</span>
      @if (prod.condition) {
      <span class="condition-badge">{{ prod.condition === 'new' ? 'Nuevo' : prod.condition }}</span>
      }
    </div>

    @if (prod.description) {
    <div class="description-section">
      <h2 class="description-title">Descripción</h2>
      <p class="description-text" [innerHTML]="prod.description"></p>
    </div>
    }
  </div>
  }
</ion-content>